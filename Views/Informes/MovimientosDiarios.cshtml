@model List<GestionVentas.Models.MovimientoCaja>

<div class="container mt-4">
    <div class="card border-0 shadow-lg">
        <div class="card-header bg-primary text-white p-3">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h3 class="mb-0"><i class="fas fa-chart-line me-2"></i>Resumen de Movimientos</h3>
                </div>
                <div class="col-md-6">
                    <form method="get" class="d-flex justify-content-end align-items-center">
                        <label class="me-2 fw-bold">Fecha:</label>
                        <input type="date" name="fecha" value="@ViewBag.FechaActual" class="form-control w-50 me-2" />
                        <button type="submit" class="btn btn-light text-primary fw-bold">
                            <i class="fas fa-search"></i> Filtrar
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <div class="card-body p-0">
            <table class="table table-hover mb-0">
                <thead class="table-dark">
                    <tr>
                        <th class="ps-4">Hora</th>
                        <th>Usuario</th>
                        <th>Descripci√≥n / Comprobante</th>
                        <th class="text-end">Ingreso (+)</th>
                        <th class="text-end">Egreso (-)</th>
                        <th class="text-end pe-4">Subtotal</th>
                    </tr>
                </thead>
                <tbody>
                    @if (!Model.Any())
                    {
                        <tr>
                            <td colspan="6" class="text-center py-5 text-muted">
                                <i class="fas fa-info-circle fa-2x mb-2"></i><br>
                                No hay movimientos registrados para esta fecha.
                            </td>
                        </tr>
                    }
                    else
                    {
                        @foreach (var m in Model)
                        {
                            <tr>
                                <td class="ps-4">@m.Fecha.ToString("HH:mm") hs</td>
                                <td><span class="badge bg-light text-dark border">Admin</span></td>
                                <td>@m.Concepto</td>
                                <td class="text-end text-success fw-bold">
                                    @(m.Tipo == TipoMovimiento.Ingreso ? "+ " + m.Monto.ToString("N2") : "-")
                                </td>
                                <td class="text-end text-danger fw-bold">
                                    @(m.Tipo == TipoMovimiento.Egreso ? "- " + m.Monto.ToString("N2") : "-")
                                </td>
                                <td class="text-end pe-4 fw-bold text-secondary">
                                    $ @m.Monto.ToString("N2")
                                </td>
                            </tr>
                        }
                    }
                </tbody>
                <tfoot class="table-light">
                    <tr class="fs-5">
                        <td colspan="5" class="text-end fw-bold py-3">EFECTIVO TOTAL EN CAJA:</td>
                        <td class="text-end pe-4 py-3 fw-bold text-primary">
                            $ @ViewBag.TotalFinalDia.ToString("N2")
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>